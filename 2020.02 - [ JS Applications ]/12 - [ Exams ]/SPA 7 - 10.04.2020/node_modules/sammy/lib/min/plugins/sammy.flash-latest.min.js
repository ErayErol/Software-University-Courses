// -- Sammy.js -- /plugins/sammy.flash.js
// http://sammyjs.org
// Version: 0.7.6
// Built: 2014-08-26 10:45:31 +0300
(function(factory){if(typeof define==="function"&&define.amd){define(["jquery","sammy"],factory)}else{(window.Sammy=window.Sammy||{}).Flash=factory(window.jQuery,window.Sammy)}})(function($,Sammy){Sammy.FlashHash=function(){this.now={}};$.extend(Sammy.FlashHash.prototype,{toHTML:function(){var result=this._renderUL();this.clear();return result},clear:function(){this._clearHash(this);this._clearHash(this.now)},_onRedirect:function(){this._clearHash(this.now)},_clearHash:function(hash){var key;for(key in hash){if(key!=="now"&&hash.hasOwnProperty(key)){delete hash[key]}}},_renderUL:function(){return'<ul class="flash">'+this._renderLIs(this)+this._renderLIs(this.now)+"</ul>"},_renderLIs:function(hash){var result="",key;for(key in hash){if(hash[key]&&key!=="now"&&hash.hasOwnProperty(key)){result=result+'<li class="'+key+'">'+hash[key]+"</li>"}}Sammy.log("rendered flash: "+result);return result}});Sammy.Flash=function(app){app.flash=new Sammy.FlashHash;app.helper("flash",function(key,value){if(arguments.length===0){return this.app.flash}else if(arguments.length===2){this.app.flash[key]=value}return this.app.flash[key]});app.helper("flashNow",function(key,value){if(arguments.length===0){return this.app.flash.now}else if(arguments.length===2){this.app.flash.now[key]=value}return this.app.flash.now[key]});app.bind("redirect",function(){this.app.flash._onRedirect()})};return Sammy.Flash});